<div class="row" *ngIf="dataAvailable">


  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">All Experiments</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body">-->
        <!--<nvd3 #nvd32 class="col-md-12" [options]="chart1Options" [data]="chart1Data"></nvd3>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">All Experiments</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body">-->
        <!--<nvd3 #nvd3 class="col-md-12" [options]="chart1Options" [data]="chart1Data"></nvd3>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">All Experiments</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body">-->
        <!--<nvd3 #nvd33 class="col-md-12" [options]="chart3Options" [data]="chart1Data"></nvd3>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->


  <!--<div class="col-md-6">-->
    <!--<div id="myDiv"></div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
     <!--<div id="heat2"></div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">Histogram with Fixed-size bins (Run 1)</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body" >-->
        <!--<div class="col-md-12" id="histogram1" style="width: 600px; height: 400px"></div>-->
      <!--</div>-->
      <!--<div class="panel-footer">-->
        <!--<p id="logSummary1">click to switch to Log. scale</p>-->
        <!--<button type="button" class="btn btn-primary" (click)="renderLogScale('histogram1', '1')" id="logScaleButton1">Logarithmic Scale</button>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">Scatter Chart (Run 1)</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body" >-->
        <!--<div class="col-md-12" id="chartdiv1" style="width: 600px; height: 400px"></div>-->
      <!--</div>-->
      <!--<div class="panel-footer">-->
        <!--<p id="filterSummary1">click on graph to pick a threshold for removing outliers</p>-->
        <!--<button type="button" class="btn btn-primary" (click)="filterOutliers('chartdiv1')">Filter</button>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">Histogram with Fixed-size bins (Run 2)</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body" >-->
        <!--<div class="col-md-12" id="histogram2" style="width: 600px; height: 400px"></div>-->
      <!--</div>-->
      <!--<div class="panel-footer">-->
        <!--<p id="logSummary2">click to switch to Log. scale</p>-->
        <!--<button type="button" class="btn btn-primary" (click)="renderLogScale('histogram2', '2')" id="logScaleButton2">Logarithmic Scale</button>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!--<div class="col-md-6">-->
    <!--<div class="panel panel-default">-->
      <!--<div class="panel-heading">-->
        <!--<div class="card-title">-->
          <!--<div class="title pull-left">Line Chart</div>-->
        <!--</div>-->
      <!--</div>-->
      <!--<div class="panel-body" >-->
        <!--<div class="col-md-12" id="chartdiv2" style="width: 600px; height: 400px"></div>-->
      <!--</div>-->
      <!--<div class="panel-footer">-->
        <!--<p id="filterSummary2">click on graph to pick a threshold for removing outliers</p>-->
        <!--<button type="button" class="btn btn-primary" (click)="filterOutliers('chartdiv2')">Filter</button>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->

  <!-- Experiment Details -->
  <div class="col-sm-12 col-xs-12">
    <div class="panel panel-default chartJs">
      <div class="panel-heading">
        <div class="card-title pull-left">
          <div class="title pull-left">Experiment Details</div>
        </div>
      </div>
      <div class="panel-body">
        <div class="row">
          <labeled-input name="Experiment Name" [model]="experiment" key="name" [colSize]="6" [disabled]="true"></labeled-input>
          <labeled-input name="Experiment Description" [model]="experiment" key="description" [colSize]="6" [disabled]="true"></labeled-input>
        </div>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-xs-12" *ngIf="targetSystem.name !== ''" >
    <!-- Primary Data Provider -->
    <div class="col-sm-6 col-xs-12" style="padding-left: 0">
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title">
            <div class="title pull-left">Primary Data Provider</div>
          </div>
        </div>
        <div class="panel-body" style="padding-top: 20px">

          <div class="row" *ngIf="targetSystem.primaryDataProvider.type == 'http_request'">
            <div class="col-md-6">
              <div class="sub-title">URL</div>
              <span>{{targetSystem.primaryDataProvider.url}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Port</div>
              <span>{{targetSystem.primaryDataProvider.port}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.primaryDataProvider.serializer}}</span>
            </div>
          </div>

          <div class="row" *ngIf="targetSystem.primaryDataProvider.type == 'kafka_consumer'">
            <div class="col-md-6">
              <div class="sub-title">Kafka URI</div>
              <span>{{targetSystem.primaryDataProvider.kafka_uri}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Topic</div>
              <span>{{targetSystem.primaryDataProvider.topic}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.primaryDataProvider.serializer}}</span>
            </div>
          </div>

          <div class="row" *ngIf="targetSystem.primaryDataProvider.type == 'mqtt_listener'">
            <div class="col-md-6">
              <div class="sub-title">Host</div>
              <span>{{targetSystem.primaryDataProvider.host}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Port</div>
              <span>{{targetSystem.primaryDataProvider.port}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Topic</div>
              <span>{{targetSystem.primaryDataProvider.topic}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.primaryDataProvider.serializer}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Change Provider -->
    <div class="col-sm-6 col-xs-12" style="padding-right: 0">
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title">
            <div class="title pull-left">Change Provider</div>
          </div>
        </div>
        <div class="panel-body" style="padding-top: 20px">

          <div class="row" *ngIf="targetSystem.changeProvider.type == 'http_request'">
            <div class="col-md-6">
              <div class="sub-title">URL</div>
              <span>{{targetSystem.changeProvider.url}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Port</div>
              <span>{{targetSystem.changeProvider.port}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.changeProvider.serializer}}</span>
            </div>
          </div>

          <div class="row" *ngIf="targetSystem.changeProvider.type == 'kafka_producer'">
            <div class="col-md-6">
              <div class="sub-title">Kafka URI</div>
              <span>{{targetSystem.changeProvider.kafka_uri}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Topic</div>
              <span>{{targetSystem.changeProvider.topic}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.changeProvider.serializer}}</span>
            </div>
          </div>

          <div class="row" *ngIf="targetSystem.changeProvider.type == 'mqtt_listener'">
            <div class="col-md-6">
              <div class="sub-title">Host</div>
              <span>{{targetSystem.changeProvider.host}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Port</div>
              <span>{{targetSystem.changeProvider.port}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Topic</div>
              <span>{{targetSystem.changeProvider.topic}}</span>
            </div>
            <div class="col-md-6">
              <div class="sub-title">Serializer</div>
              <span>{{targetSystem.changeProvider.serializer}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-xs-12" *ngIf="targetSystem.name !== ''" >
    <!-- Incoming Data Types -->
    <div class="col-sm-6 col-xs-12" style="padding-left: 0">
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title">
            <div class="title pull-left">Incoming Data Types</div>
          </div>
        </div>
        <div class="panel-body" style="padding-top: 20px">
          <div class="table-responsive" style="padding-top: 20px">
            <table>
              <thead>
              <th style="width: 5%">Name</th>
              <th style="width: 5%">Scale</th>
              <th style="width: 5%">Description</th>
              </thead>
              <tbody>
              <tr *ngFor="let dataType of targetSystem.incomingDataTypes" style="padding-top: 1%">
                <td style="padding-top: 1%">{{dataType.name}}</td>
                <td>{{dataType.scale}}</td>
                <td>{{dataType.description}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Experiment variables previously added at Experiment creation stage -->
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title"><div class="title pull-left">Experiment Variables</div></div>
        </div>
        <div class="panel-body" style="padding-top: 20px">
          <div class="table-responsive" style="padding-top: 20px">
            <table>
              <thead>
              <th style="width: 5%">Name</th>
              <th style="width: 5%">Min</th>
              <th style="width: 5%">Max</th>
              <th style="width: 5%">Step Size</th>
              </thead>
              <tbody>
              <tr *ngFor="let input of experiment.changeableVariable" style="padding-top: 1%">
                <td style="padding-top: 1%">{{input.name}}</td>
                <td>{{input.min}}</td>
                <td>{{input.max}}</td>
                <td>{{input.step}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>

    <!-- Execution Strategy -->
    <div class="col-sm-6 col-xs-12" style="padding-right: 0">
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title">
            <div class="title pull-left">Execution Strategy</div>
          </div>
        </div>
        <div class="panel-body" style="padding-top: 20px">
          <div class="table-responsive" style="padding-top: 20px">
            <table>
              <thead>
              <th style="width: 5%">Type</th>
              <th style="width: 5%">Ignore First N Results</th>
              <th style="width: 5%">Sample Size</th>
              </thead>
              <tbody>
                <td style="padding-top: 1%">{{experiment.executionStrategy.type}}</td>
                <td>{{experiment.executionStrategy.ignore_first_n_results}}</td>
                <td>{{experiment.executionStrategy.sample_size}}</td>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-sm-12 col-xs-12">
    <div class="panel panel-default chartJs">
      <div class="panel-heading">
        <div class="card-title">
          <div class="title pull-left">Stages of Experiment</div>
        </div>
      </div>
      <div class="panel-body" style="padding-top: 20px">
        <div class="row">
          <div class="col-md-3">
            <div>
              <select class="form-control" required (change)="firstDropDownChanged($event.target.value)">
                <option disabled>Select stage</option>
                <option *ngFor="let i of availableStages;" [ngValue]="i">{{ i.number }}</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Smooth-Line Chart -->
  <div class="col-sm-12 col-xs-12" *ngIf="is_enough_data_for_plots">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="card-title">
          <div class="title pull-left">Smooth-Line Chart</div>
        </div>
      </div>
      <div class="panel-body">
        <div class="col-md-12" id="chartdiv{{selected_stage_no}}" style="width: 100%; height: 400px"></div>
      </div>
      <div class="panel-footer">
        <p id="filterSummary{{selected_stage_no}}">Initial threshold for 95-percentile: <b>{{initialThresholdForSmoothLineChart}}</b></p>
        <button id="filterButton{{selected_stage_no}}" type="button" class="btn btn-primary" (click)="filterOutliers($event)">Filter</button>
      </div>
    </div>
  </div>




  <div class="col-sm-12 col-xs-12" *ngIf="is_enough_data_for_plots">

    <!-- Histogram -->
    <div class="panel panel-default">
        <div class="panel-heading">
          <div class="card-title">
            <div class="title pull-left" [hidden]="isLogSelected">Histogram with Normal Scale</div>
            <div class="title pull-left" [hidden]="!isLogSelected">Histogram with Logarithmic Scale</div>
        </div>
      </div>
      <div class="panel-body" >
        <div class="col-md-12" id="histogram{{selected_stage_no}}" [hidden]="isLogSelected" style="width: 100%; height: 400px"></div>
        <div class="col-md-12" id="histogram{{selected_stage_no}}_log" [hidden]="!isLogSelected" style="width: 100%; height: 400px"></div>
        <div class="panel-footer">
          <button type="button" class="btn btn-primary" [hidden]="isLogSelected" (click)="isLogSelected = !isLogSelected">
            Switch to Logarithmic Scale
          </button>
        <button type="button" class="btn btn-primary" [hidden]="!isLogSelected" (click)="isLogSelected = !isLogSelected">
            Switch to Normal Scale
        </button>
        </div>
      </div>
    </div>

    <!-- QQ graph 1 -->
    <div class="col-sm-6 col-xs-12" *ngIf="is_enough_data_for_plots">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            <div class="title pull-left">Quantile Quantile (QQ) Plot against Theoretical Data &nbsp;</div>
            <div class="col-md-6">
              <div style="margin-top: 5%">
                <span>Theoretical Data Distribution:</span>
                  <li id="availableDistributionsDropdown" class="dropdown">
                  <a style="color: #ee6f5d" class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    {{distribution}} <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-tasks">
                    <li *ngFor="let dist of availableDistributions">
                      <a>
                        <div (click)="selectDistribution(dist)">
                          <p>
                            <strong>{{dist}}</strong>
                          </p>
                        </div>
                      </a>
                    </li>
                  </ul>
                  <!-- /.dropdown-tasks -->
                </li>
              </div>
              <div style="margin-top: 5%">
                <span>Data scale:</span>
                <li id="availableScalesQQ" class="dropdown">
                  <a style="color: #ee6f5d" class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    {{scale}} <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-tasks">
                    <li *ngFor="let scale of availableScales">
                      <a>
                        <div (click)="selectScale(scale)">
                          <p>
                            <strong>{{scale}}</strong>
                          </p>
                        </div>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>
          </div>
        </div>
        <div class="panel-body" style="margin-top: 5%">
          <div [hidden]="!qqPlotIsRendered">
            <img class="col-md-6" id="qqPlot{{selected_stage_no}}" class="img-thumbnail" style="width: 100%; height: 400px; margin-top: 5%">
          </div>
        </div>
        <div class="panel-footer">
          <button type="button" class="btn btn-primary" (click)="drawQQPlot()" id="renderQQPlotButton">Render Plot</button>
        </div>
      </div>
    </div>

    <!-- QQ graph 2 -->
    <div class="col-sm-6 col-xs-12" *ngIf="is_enough_data_for_plots">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            <div class="title pull-left">Quantile Quantile (QQ) Plot against Stages &nbsp;</div>
            <div class="col-md-6">
              <div style="margin-top: 5%">
                <span>Stage:</span>
                <li id="availableExpRuns" class="dropdown">
                  <a style="color: #ee6f5d" class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    {{selectedStageNoForQQJS}} <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-tasks">
                    <li *ngFor="let stageNo of availableStages">
                      <a>
                        <div (click)="selectStageNoForQQJS(stageNo.number)">
                          <p>
                            <strong>{{stageNo.number}}</strong>
                          </p>
                        </div>
                      </a>
                    </li>
                  </ul>
                  <!-- /.dropdown-tasks -->
                </li>
              </div>
              <div style="margin-top: 5%">
                <span>Data scale:</span>
                <li id="availableScalesQQJS" class="dropdown">
                  <a style="color: #ee6f5d" class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    {{selectedScaleForQQJS}} <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-tasks">
                    <li *ngFor="let scaleQQJS of availableScalesForQQJS">
                      <a>
                        <div (click)="selectScaleForQQJS(scaleQQJS)">
                          <p>
                            <strong>{{scaleQQJS}}</strong>
                          </p>
                        </div>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>
          </div>
        </div>
        <div class="panel-body svg-container" style="margin-top: 5%">
          <div [hidden]="!qqJSPlotIsRendered">
            <svg id="qqPlotJS{{selected_stage_no}}" viewBox="0 0 500 500" preserveAspectRatio="xMinYMin meet" class="svg-content"></svg>
          </div>
        </div>
        <div class="panel-footer">
          <button type="button" class="btn btn-primary" (click)="drawQQJS()" id="renderQQJSButton">Render Plot</button>
        </div>
      </div>
    </div>

  </div>
</div>
