<div class="row" *ngIf="dataAvailable">

  <!-- Experiment Details & Analysis Section -->
  <experiment-details [experiment]="experiment" [targetSystem]="targetSystem" [is_collapsed]="is_collapsed" [for_successful_experiment]="true"></experiment-details>
  <analysis *ngIf="(experiment.analysis.type == 'two_sample_tests' || experiment.analysis.type == 'factorial_tests'
                  || experiment.analysis.type == 'one_sample_tests' || experiment.analysis.type == 'n_sample_tests') && experiment.status == 'SUCCESS'"
            [experiment]="experiment" [targetSystem]="targetSystem"></analysis>

  <!-- Experiment Stages -->
  <!--<experiment-stages [experiment]="experiment"-->
                     <!--[selected_stage]="selected_stage"-->
                     <!--[available_stages]="available_stages"-->
                     <!--[incoming_data_type]="incoming_data_type"-->
                     <!--[scale]="scale"-->
                     <!--[targetSystem]="targetSystem"-->
                     <!--[for_successful_experiment]="true"-->
                     <!--[hidden]="false"-->
                     <!--(incomingDataTypeChanged)="incoming_data_type_changed($event)"-->
                     <!--(scaleChanged)="scale_changed($event)"-->
                     <!--(stageChanged)="stage_changed($event)"-->
                     <!--&gt;</experiment-stages>-->

  <!-- Experiment Stages with paginator -->
  <experiment-stages-paginator [experiment]="experiment"
                     [selected_stage]="selected_stage"
                     [available_stages]="available_stages"
                     [incoming_data_type]="incoming_data_type"
                     [scale]="scale"
                     [targetSystem]="targetSystem"
                     [for_successful_experiment]="true"
                     [retrieved_data_length]="retrieved_data_length"
                     [hidden]="false"
                     (incomingDataTypeChanged)="incoming_data_type_changed($event)"
                     (scaleChanged)="scale_changed($event)"
                     (rowClicked)="stage_changed($event)"></experiment-stages-paginator>

  <!-- Smooth-Line Chart -->
  <div class="col-md-12" [hidden]="!is_enough_data_for_plots">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="card-title">
          <div class="title pull-left">Scatter Plot with {{scale}} Scale</div>
        </div>
      </div>
      <div class="panel-body">
        <div class="col-md-12" id="chartdiv" style="width: 100%; height: 400px"></div>
      </div>
      <div class="panel-footer">
        <p id="filterSummary">Initial threshold for 95-percentile: <b>{{initial_threshold_for_scatter_chart}}</b></p>
        <!--<button id="filterButton{{selected_stage_no}}" type="button" class="btn btn-primary" (click)="filter_outliers($event)">Filter</button>-->
      </div>
    </div>
  </div>

  <!-- Histogram -->
  <div class="col-md-12" [hidden]="!is_enough_data_for_plots">
    <div class="panel panel-default">
      <div class="panel-heading">
        <div class="card-title">
          <div class="title pull-left">Histogram with {{scale}} Scale</div>
        </div>
      </div>
      <div class="panel-body" >
        <div class="col-md-12" id="histogram" style="width: 100%; height: 400px"></div>
      </div>
    </div>
  </div>

  <!-- QQ graphs -->
  <div class="col-md-12" [hidden]="!is_enough_data_for_plots" >
    <!-- QQ graph 1 -->
    <div class="col-md-6">
      <div class="panel panel-default chartJs">
        <div class="panel-heading">
          <div class="card-title">
            <div class="col-md-6">
              <div class="title pull-left">Quantile Quantile (QQ) Plot against Theoretical Data &nbsp;</div>

            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="title">Theoretical Data Distribution</div>
                <select class="form-control"
                        [(ngModel)]="distribution" (ngModelChange)="selectDistributionAndDrawQQPlot($event)" size="1">
                  <option *ngFor="let dist of available_distributions" value="{{dist}}">{{dist}}</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="panel-body">
          <div>{{stage_details}}</div>
          <div [hidden]="!is_qq_plot_rendered">
            <!--additional css for centering the img-->
            <img class="col-md-6" id="qqPlot" class="img-thumbnail">
          </div>
        </div>
      </div>
    </div>


    <!-- QQ graph 2 -->
    <!--<div class="col-md-6" [hidden]="selected_stage.number === -1">-->
      <!--<div class="panel panel-default chartJs">-->
        <!--<div class="panel-heading">-->
          <!--<div class="card-title">-->
            <!--<div class="col-md-6">-->
              <!--<div class="title pull-left">Quantile Quantile (QQ) Plot against Other Stage Data &nbsp;</div>-->
            <!--</div>-->
          <!--</div>-->
          <!--<div class="row">-->
            <!--<div class="col-md-6">-->
              <!--<div class="title">Other  Stage</div>-->
              <!--<select class="form-control"-->
                      <!--[(ngModel)]="selected_stage_for_qq_js" (ngModelChange)="selectStageNoForQQJS($event)" size="1">-->
                <!--<option *ngFor="let stage_no of available_stages_for_qq_js" value="{{stage_no.number}}">{{stage_no.number}}</option>-->
              <!--</select>-->
            <!--</div>-->
          <!--</div>-->
        <!--</div>-->

        <!--<div class="panel-body">-->
          <!--<div class="col-md-6">-->
            <!--<div class="panel-body" style="padding-top: 20px">-->
              <!--&lt;!&ndash;ref: https://css-tricks.com/scale-svg/&ndash;&gt;-->
              <!--<div class="scaling-svg-container"-->
                   <!--style="padding-bottom: 100% /* 100% * 55/60 */">-->
                <!--<svg class="scaling-svg" viewBox="0 0 400 400" id="qqPlotJS">-->
                  <!--&lt;!&ndash; SVG content &ndash;&gt;-->
                <!--</svg>-->
              <!--</div>-->
            <!--</div>-->
          <!--</div>-->
        <!--</div>-->
      <!--</div>-->
    <!--</div>-->
  </div>

</div>
